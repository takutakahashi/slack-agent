# Slack AIアシスタント ユーザーガイド

## 概要

このSlack AIアシスタントは、OpenAI APIを利用して、Slack上でインテリジェントな会話を実現するボットです。メンションやダイレクトメッセージを通じて、様々な質問や要望に対応します。

## 機能

### 1. メンション応答
- パブリックチャンネルやプライベートチャンネルでボットにメンション（`@bot`）することで利用できます
- 応答は常にスレッド内で行われます
- 複数回のやり取りが可能です

### 2. ダイレクトメッセージ（DM）
- ボットとのプライベートな1対1の会話が可能です
- スレッドでの会話もサポートしています

## セットアップ

### 環境変数の設定

以下の環境変数を`.env`ファイルに設定してください：

```bash
# 必須の設定
SLACK_BOT_TOKEN=xoxb-your-bot-token
SLACK_SIGNING_SECRET=your-signing-secret
OPENAI_API_KEY=your-openai-api-key

# オプションの設定
SLACK_APP_TOKEN=xapp-your-app-token  # Socket Mode使用時に必要
SYSTEM_PROMPT_PATH=/path/to/your/prompt.txt  # カスタムシステムプロンプト
PORT=3000  # アプリケーションのポート番号
```

### システムプロンプトのカスタマイズ

ボットの応答スタイルや性格をカスタマイズしたい場合は、以下の手順で行えます：

1. プロンプトファイルの作成：
   ```text
   # prompt.txt
   あなたは親切で有能なアシスタントです。ユーザーの質問や要望に対して、丁寧かつ適切に応答してください。

   応答の際は以下の点に注意してください：
   1. 明確で分かりやすい日本語を使用する
   2. 必要に応じて箇条書きや見出しを使用して情報を整理する
   3. 専門用語を使用する場合は適切な説明を加える
   ```

2. 環境変数での指定：
   ```bash
   SYSTEM_PROMPT_PATH=/path/to/your/prompt.txt
   ```

## 使用方法

### メンションでの利用

1. パブリックチャンネルでの利用：
   ```
   @bot こんにちは
   > こんにちは！何かお手伝いできることはありますか？
   ```

2. 質問の例：
   ```
   @bot Pythonのリスト内包表記について教えて
   > [詳細な説明がスレッドで返信されます]
   ```

### DMでの利用

1. 基本的な会話：
   ```
   あなた: こんにちは
   Bot: こんにちは！何かお手伝いできることはありますか？
   ```

2. スレッドでの会話：
   ```
   あなた: プログラミングについて質問があります
   Bot: はい、どのような質問でしょうか？お気軽にお聞きください。
   ```

## トラブルシューティング

### よくある問題と解決方法

1. ボットが応答しない
   - 環境変数が正しく設定されているか確認
   - ボットがチャンネルに招待されているか確認
   - ログを確認して詳細なエラーを特定

2. カスタムプロンプトが適用されない
   - `SYSTEM_PROMPT_PATH`の値が正しいか確認
   - ファイルのパーミッションを確認
   - ファイルの文字コードがUTF-8であることを確認

3. エラーメッセージが表示される
   - 各種APIキーの有効性を確認
   - 必要な権限が付与されているか確認
   - ネットワーク接続を確認

## サポートとフィードバック

問題が解決しない場合や機能の改善要望がある場合は、以下の方法でご連絡ください：

1. GitHubイシューの作成
2. プルリクエストの送信
3. 管理者への直接連絡

## セキュリティ注意事項

1. APIキーの管理
   - 環境変数は適切に管理し、公開リポジトリにコミットしない
   - 定期的にAPIキーをローテーション

2. 情報の取り扱い
   - 機密情報はボットとの会話で共有しない
   - 必要に応じてプライベートチャンネルやDMを使用 